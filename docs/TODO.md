# 0xRIP 实施计划与 TODO

本文档按文档规范拆解开发任务，便于按阶段开工。优先级：**P0 紧急 / P1 重要 / P2 一般**。

---

## 一、当前阶段：前端埋葬仪式 + 详情增强

| ID | 任务 | 优先级 | 状态 | 说明 |
|:---|:---|:---|:---|:---|
| F1 | 埋葬仪式多步骤 UI（步骤 1～4） | P0 | 进行中 | 触发 BURY 后进入向导：选棺 → 墓志铭 → 确认死亡 → 引导上传记忆/URL 或稍后再说 |
| F2 | 墓碑详情面板增加「此人一生」时间线占位 | P1 | 待开始 | 点击墓碑后展示时间线区域，无数据时显示占位文案，后续接后端时间线 API |
| F3 | 步骤 3「确认死亡」视觉/音效（灰度→噪点→消散） | P2 | 待开始 | 可选：简短动画 + 音效，增强仪式感 |

---

## 二、后端与数据

| ID | 任务 | 优先级 | 状态 | 说明 |
|:---|:---|:---|:---|:---|
| B1 | 统一 AI 网关（OpenAI 兼容） | P1 | 待开始 | 封装 LLM/VLM/TTS/STT，对接引导仪式、墓志铭、招魂对话 |
| B2 | 步骤 4：URL 抓取 + 模型生成独有 txt 入碑 | P1 | 待开始 | 见 [backend/ai-integration.md](./backend/ai-integration.md) 4.5 |
| B3 | 时间线加工 API「此人一生」 | P1 | 待开始 | 输入墓碑 id，返回按时间线编排的段落/JSON |
| B4 | 招魂对话 API（people/ 记忆注入） | P1 | 待开始 | 多轮对话，可选 TTS/STT |

---

## 三、后续扩展

| ID | 任务 | 优先级 | 说明 |
|:---|:---|:---|:---|
| E1 | 自然语言指令解析（/bury xxx、召唤张三） | P2 | LLM 意图+槽位，映射到 BURY/SUMMON 等 |
| E2 | 幽灵对话界面（招魂后弹出对话 UI） | P1 | 与 SUMMON 联动，调用 B4 |
| E3 | people/ 目录与前端展示联动 | P2 | 从 people 读取 description/traits/memories 用于招魂与详情 |

---

## 四、测试与验收

- **F1 验收**：输入 BURY 或点击埋葬 → 依次完成步骤 1～4（可跳过步骤 4）→ 墓地中出现新墓碑，详情中含墓志铭与棺材类型。
- **F2 验收**：点击任意墓碑 → 详情中可见「此人一生」区域，无数据时显示占位。

---

## 五、开发日志

完成 F1/F2 后请在 [logs/command-log.md](./logs/command-log.md) 记录实现要点与下一步。
