# 开发日志

## [2025-02-07]

### 实现功能
- 基于 README 中的「赛博墓地」风格，用 **TypeScript + Three.js** 搭建前端项目。
- 使用 Vite 构建，入口为 `index.html`，主逻辑在 `src/main.ts`，样式在 `src/style.css`。
- Three.js 场景：霓虹青/粉灯光、地面网格、墓碑（黑金属盒体 + 线框 + Canvas 铭牌）、幽灵（粒子人形 + 霓虹粉线框核心），含动画与鼠标跟随。
- UI 层：CRT 扫描线、Glitch 标题、赛博边框/输入/按钮、打字机对话、发送与幽灵点击交互。
- 在 **UI 交互规范**（`docs/frontend/ui.md`）中新增 **第七章：视觉风格规范（赛博墓地 CYBER NECROPOLIS）**，统一色彩、字体、CRT/Glitch、Three.js 素材风格及技术栈说明。

### 遇到的问题
- TypeScript 严格空检查：在 `typeWriter` 的闭包内使用 `typewriterEl` 被判为可能为 null。
- 解决：在函数开头用局部变量 `targetEl: HTMLElement` 承接非空判断后的元素，闭包内统一使用 `targetEl`。

### 下一步计划
- 可按需扩展指令（BURY / SUMMON / MOURN 等）与后端或链上对接。
- 可选：增加更多 3D 素材（更多墓碑、数据雨等）并保持同一视觉风格。

---

## [2025-02-07] 埋葬仪式多步骤 + 此人一生占位

### 实现功能
- **docs/TODO.md**：新增实施计划，按 frontend/backend/扩展拆解任务（F1～F3、B1～B4、E1～E3），含验收标准。
- **埋葬仪式向导**：输入 `BURY [name]` 或点击 BURY 后进入多步骤面板。
  - 步骤 1：选择棺材类型（zip / nft / quantum / blackhole），选后可点「下一步」。
  - 步骤 2：撰写墓志铭（64 字内），支持「自动生成」占位文案，下一步进入步骤 3。
  - 步骤 3：确认死亡预览，点击「确认死亡」后生成 `0xDEAD...` id、创建墓碑并加入场景，进入步骤 4。
  - 步骤 4：引导上传记忆与资料——上传 .txt（多文件）、填入网页 URL，或「稍后再说」/「完成」关闭。记忆与 URL 存入该碑的 `memories`、`urls` 字段。
- **墓碑详情**：新增「此人的一生」区域，无数据时显示占位文案；若该碑有关联记忆/URL，显示「已关联 X 条记忆、Y 个 URL。时间线加工将在后端接入后展示。」
- 样式：`.burial-ritual-panel`、`.ritual-step`、棺材选项、墓志铭输入、上传区、时间线占位等符合赛博墓地视觉。

### 遇到的问题
- 无。

### 下一步计划
- 后端：AI 网关、步骤 4 URL 抓取+模型生成 txt、时间线加工 API、招魂对话 API（见 docs/TODO.md）。
- 可选：步骤 3「确认死亡」视觉/音效（灰度→噪点→消散）。
